<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p583" style="overflow: hidden; position: relative; background-color: white; width: 640px; height: 853px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_583{left:122px;bottom:738px;letter-spacing:-0.17px;word-spacing:-0.29px;}
#t2_583{left:214px;bottom:739px;}
#t3_583{left:226px;bottom:738px;letter-spacing:-0.14px;word-spacing:-0.29px;}
#t4_583{left:122px;bottom:716px;letter-spacing:-0.15px;word-spacing:0.58px;}
#t5_583{left:122px;bottom:694px;letter-spacing:-0.14px;word-spacing:1.29px;}
#t6_583{left:122px;bottom:673px;letter-spacing:-0.14px;word-spacing:0.71px;}
#t7_583{left:122px;bottom:651px;letter-spacing:-0.14px;word-spacing:-0.16px;}
#t8_583{left:122px;bottom:629px;letter-spacing:-0.14px;word-spacing:1.01px;}
#t9_583{left:412px;bottom:631px;letter-spacing:-0.27px;}
#ta_583{left:490px;bottom:629px;letter-spacing:-0.11px;}
#tb_583{left:122px;bottom:607px;letter-spacing:-0.14px;word-spacing:1.16px;}
#tc_583{left:122px;bottom:586px;letter-spacing:-0.14px;word-spacing:0.77px;}
#td_583{left:122px;bottom:564px;letter-spacing:-0.15px;word-spacing:1.6px;}
#te_583{left:122px;bottom:542px;letter-spacing:-0.18px;word-spacing:0.71px;}
#tf_583{left:122px;bottom:520px;letter-spacing:-0.15px;word-spacing:0.24px;}
#tg_583{left:122px;bottom:499px;letter-spacing:-0.13px;word-spacing:-0.15px;}
#th_583{left:171px;bottom:500px;letter-spacing:-0.27px;}
#ti_583{left:219px;bottom:499px;letter-spacing:-0.21px;word-spacing:-0.01px;}
#tj_583{left:406px;bottom:500px;letter-spacing:-0.27px;}
#tk_583{left:442px;bottom:499px;letter-spacing:-0.15px;}
#tl_583{left:461px;bottom:500px;letter-spacing:-0.27px;}
#tm_583{left:505px;bottom:499px;letter-spacing:-0.14px;}
#tn_583{left:122px;bottom:477px;letter-spacing:-0.15px;word-spacing:0.12px;}
#to_583{left:122px;bottom:455px;letter-spacing:-0.17px;word-spacing:0.24px;}
#tp_583{left:122px;bottom:434px;letter-spacing:-0.15px;word-spacing:0.02px;}
#tq_583{left:80px;bottom:389px;letter-spacing:0.09px;}
#tr_583{left:132px;bottom:389px;letter-spacing:0.1px;}
#ts_583{left:80px;bottom:358px;letter-spacing:-0.14px;}
#tt_583{left:98px;bottom:358px;letter-spacing:-0.12px;word-spacing:-0.15px;}
#tu_583{left:183px;bottom:358px;letter-spacing:-0.15px;word-spacing:-0.12px;}
#tv_583{left:80px;bottom:337px;letter-spacing:-0.17px;word-spacing:1.45px;}
#tw_583{left:285px;bottom:338px;letter-spacing:-0.27px;}
#tx_583{left:331px;bottom:337px;letter-spacing:-0.17px;}
#ty_583{left:362px;bottom:338px;letter-spacing:-0.27px;}
#tz_583{left:451px;bottom:337px;letter-spacing:-0.16px;word-spacing:1.43px;}
#t10_583{left:80px;bottom:315px;letter-spacing:-0.16px;word-spacing:1.7px;}
#t11_583{left:388px;bottom:316px;letter-spacing:-0.27px;}
#t12_583{left:419px;bottom:315px;letter-spacing:-0.15px;word-spacing:1.67px;}
#t13_583{left:80px;bottom:293px;letter-spacing:-0.18px;word-spacing:2.2px;}
#t14_583{left:80px;bottom:271px;letter-spacing:-0.14px;word-spacing:-0.71px;}
#t15_583{left:80px;bottom:250px;letter-spacing:-0.14px;word-spacing:0.37px;}
#t16_583{left:80px;bottom:228px;letter-spacing:-0.14px;word-spacing:0.01px;}
#t17_583{left:80px;bottom:206px;letter-spacing:-0.15px;word-spacing:0.31px;}
#t18_583{left:347px;bottom:214px;letter-spacing:0.08px;}
#t19_583{left:364px;bottom:206px;letter-spacing:-0.22px;word-spacing:0.44px;}
#t1a_583{left:80px;bottom:184px;letter-spacing:-0.13px;word-spacing:-0.97px;}
#t1b_583{left:80px;bottom:163px;letter-spacing:-0.13px;word-spacing:-0.56px;}
#t1c_583{left:94px;bottom:139px;letter-spacing:0.05px;}
#t1d_583{left:105px;bottom:133px;letter-spacing:-0.12px;}
#t1e_583{left:300px;bottom:134px;letter-spacing:0.08px;}
#t1f_583{left:344px;bottom:133px;letter-spacing:-0.14px;word-spacing:0.03px;}
#t1g_583{left:436px;bottom:133px;letter-spacing:-0.15px;word-spacing:0.05px;}
#t1h_583{left:508px;bottom:133px;}
#t1i_583{left:309px;bottom:72px;letter-spacing:-0.16px;}

.s1_583{font-size:17px;font-family:LinLibertineO_gnp;color:#000;}
.s2_583{font-size:14px;font-family:InconsolataLGC_go0;color:#000;}
.s3_583{font-size:18px;font-family:LinBiolinumOB_gnt;color:#9090C0;}
.s4_583{font-size:18px;font-family:LinBiolinumOB_gnt;color:#262626;}
.s5_583{font-size:17px;font-family:LinLibertineO_gnp;color:#80171F;}
.s6_583{font-size:12px;font-family:LinLibertineO_gnp;color:#80171F;}
.s7_583{font-size:11px;font-family:LinLibertineO_gnp;color:#000;}
.s8_583{font-size:14px;font-family:LinLibertineO_gnp;color:#000;}
.s9_583{font-size:11px;font-family:InconsolataLGC_go0;color:#000;}
.sa_583{font-size:14px;font-family:LinLibertineO_gnp;color:#80171F;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts583" type="text/css" >

@font-face {
	font-family: InconsolataLGC_go0;
	src: url("fonts/InconsolataLGC_go0.woff") format("woff");
}

@font-face {
	font-family: LinBiolinumOB_gnt;
	src: url("fonts/LinBiolinumOB_gnt.woff") format("woff");
}

@font-face {
	font-family: LinLibertineO_gnp;
	src: url("fonts/LinLibertineO_gnp.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg583Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg583" style="-webkit-user-select: none;"><svg id="pdf583" width="640" height="853" viewBox="0 0 640 853" style="width:640px; height:853px; -moz-transform:scale(1); z-index: 0; isolation: isolate;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<defs>
<style type="text/css"><![CDATA[
.g0_583{
fill: none;
stroke: #000;
stroke-width: 0.608;
stroke-miterlimit: 10;
}
]]></style>
</defs>
<path d="M80.1,697.7H272.4" class="g0_583"/>
</svg></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_583" class="t s1_583" data-mappings='[[8,"fi"]]'>would deﬁne </span><span id="t2_583" class="t s2_583">f </span><span id="t3_583" class="t s1_583">to be a procedure of four arguments, where </span>
<span id="t4_583" class="t s1_583" data-mappings='[[4,"fi"]]'>the ﬁrst and third arguments are evaluated when the pro- </span>
<span id="t5_583" class="t s1_583">cedure is called, the second argument is delayed, and the </span>
<span id="t6_583" class="t s1_583">fourth argument is both delayed and memoized. us, or- </span>
<span id="t7_583" class="t s1_583" data-mappings='[[19,"fi"]]'>dinary procedure deﬁnitions will produce the same behav- </span>
<span id="t8_583" class="t s1_583">ior as ordinary Scheme, while adding the </span><span id="t9_583" class="t s2_583">lazy-memo </span><span id="ta_583" class="t s1_583">dec- </span>
<span id="tb_583" class="t s1_583">laration to each parameter of every compound procedure </span>
<span id="tc_583" class="t s1_583" data-mappings='[[50,"fi"]]'>will produce the behavior of the lazy evaluator deﬁned in </span>
<span id="td_583" class="t s1_583">this section. Design and implement the changes required </span>
<span id="te_583" class="t s1_583">to produce such an extension to Scheme. You will have to </span>
<span id="tf_583" class="t s1_583">implement new syntax procedures to handle the new syn- </span>
<span id="tg_583" class="t s1_583">tax for </span><span id="th_583" class="t s2_583">define</span><span id="ti_583" class="t s1_583">. You must also arrange for </span><span id="tj_583" class="t s2_583">eval </span><span id="tk_583" class="t s1_583">or </span><span id="tl_583" class="t s2_583">apply </span><span id="tm_583" class="t s1_583">to </span>
<span id="tn_583" class="t s1_583">determine when arguments are to be delayed, and to force </span>
<span id="to_583" class="t s1_583">or delay arguments accordingly, and you must arrange for </span>
<span id="tp_583" class="t s1_583">forcing to memoize or not, as appropriate. </span>
<span id="tq_583" class="t s3_583">4.2.3 </span><span id="tr_583" class="t s4_583">Streams as Lazy Lists </span>
<span id="ts_583" class="t s1_583">In </span><span id="tt_583" class="t s5_583">Section 3.5.1</span><span id="tu_583" class="t s1_583">, we showed how to implement streams as delayed lists. </span>
<span id="tv_583" class="t s1_583">We introduced special forms </span><span id="tw_583" class="t s2_583">delay </span><span id="tx_583" class="t s1_583">and </span><span id="ty_583" class="t s2_583">cons-stream</span><span id="tz_583" class="t s1_583">, which allowed </span>
<span id="t10_583" class="t s1_583">us to construct a “promise” to compute the </span><span id="t11_583" class="t s2_583">cdr </span><span id="t12_583" class="t s1_583">of a stream, without </span>
<span id="t13_583" class="t s1_583" data-mappings='[[12,"fi"]]'>actually fulﬁlling that promise until later. We could use this general </span>
<span id="t14_583" class="t s1_583">technique of introducing special forms whenever we need more control </span>
<span id="t15_583" class="t s1_583">over the evaluation process, but this is awkward. For one thing, a spe- </span>
<span id="t16_583" class="t s1_583" data-mappings='[[19,"fi"]]'>cial form is not a ﬁrst-class object like a procedure, so we cannot use it </span>
<span id="t17_583" class="t s1_583">together with higher-order procedures. </span>
<span id="t18_583" class="t s6_583">39 </span>
<span id="t19_583" class="t s1_583">Additionally, we were forced </span>
<span id="t1a_583" class="t s1_583">to create streams as a new kind of data object similar but not identical to </span>
<span id="t1b_583" class="t s1_583">lists, and this required us to reimplement many ordinary list operations </span>
<span id="t1c_583" class="t s7_583">39 </span>
<span id="t1d_583" class="t s8_583">is is precisely the issue with the </span><span id="t1e_583" class="t s9_583">unless </span><span id="t1f_583" class="t s8_583">procedure, as in </span><span id="t1g_583" class="t sa_583">Exercise 4.26</span><span id="t1h_583" class="t s8_583">. </span>
<span id="t1i_583" class="t s1_583">555 </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
