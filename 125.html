<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta charset="utf-8" />
</head>

<body style="margin: 0;">

<div id="p125" style="overflow: hidden; position: relative; background-color: white; width: 640px; height: 853px;">

<!-- Begin shared CSS values -->
<style class="shared-css" type="text/css" >
.t {
	transform-origin: bottom left;
	z-index: 2;
	position: absolute;
	white-space: pre;
	overflow: visible;
	line-height: 1.5;
}
.text-container {
	white-space: pre;
}
@supports (-webkit-touch-callout: none) {
	.text-container {
		white-space: normal;
	}
}
</style>
<!-- End shared CSS values -->


<!-- Begin inline CSS -->
<style type="text/css" >

#t1_125{left:80px;bottom:737px;letter-spacing:0.09px;}
#t2_125{left:132px;bottom:737px;letter-spacing:0.07px;word-spacing:0.06px;}
#t3_125{left:80px;bottom:706px;letter-spacing:-0.15px;word-spacing:-0.04px;}
#t4_125{left:80px;bottom:685px;letter-spacing:-0.15px;word-spacing:-1.12px;}
#t5_125{left:80px;bottom:663px;letter-spacing:-0.19px;word-spacing:-1.06px;}
#t6_125{left:80px;bottom:641px;letter-spacing:-0.15px;word-spacing:0.01px;}
#t7_125{left:106px;bottom:619px;letter-spacing:-0.16px;word-spacing:-0.67px;}
#t8_125{left:80px;bottom:598px;letter-spacing:-0.12px;word-spacing:0.32px;}
#t9_125{left:265px;bottom:598px;letter-spacing:-0.12px;word-spacing:0.31px;}
#ta_125{left:350px;bottom:598px;letter-spacing:-0.19px;word-spacing:0.43px;}
#tb_125{left:80px;bottom:576px;letter-spacing:-0.14px;word-spacing:0.67px;}
#tc_125{left:80px;bottom:554px;letter-spacing:-0.12px;word-spacing:0.24px;}
#td_125{left:196px;bottom:566px;}
#te_125{left:208px;bottom:554px;}
#tf_125{left:222px;bottom:554px;letter-spacing:-0.14px;word-spacing:0.29px;}
#tg_125{left:434px;bottom:554px;}
#th_125{left:448px;bottom:554px;}
#ti_125{left:448px;bottom:554px;}
#tj_125{left:469px;bottom:554px;}
#tk_125{left:479px;bottom:554px;}
#tl_125{left:485px;bottom:554px;}
#tm_125{left:495px;bottom:554px;letter-spacing:-0.2px;word-spacing:0.36px;}
#tn_125{left:80px;bottom:532px;letter-spacing:-0.19px;word-spacing:0.58px;}
#to_125{left:80px;bottom:511px;letter-spacing:-0.16px;word-spacing:-0.93px;}
#tp_125{left:81px;bottom:489px;}
#tq_125{left:90px;bottom:489px;letter-spacing:-0.14px;word-spacing:0.01px;}
#tr_125{left:377px;bottom:489px;}
#ts_125{left:391px;bottom:489px;letter-spacing:-0.15px;word-spacing:0.03px;}
#tt_125{left:80px;bottom:467px;}
#tu_125{left:94px;bottom:467px;letter-spacing:-0.17px;}
#tv_125{left:124px;bottom:467px;}
#tw_125{left:133px;bottom:467px;}
#tx_125{left:138px;bottom:467px;}
#ty_125{left:147px;bottom:467px;}
#tz_125{left:152px;bottom:467px;}
#t10_125{left:106px;bottom:445px;letter-spacing:-0.18px;word-spacing:1.13px;}
#t11_125{left:80px;bottom:424px;letter-spacing:-0.16px;}
#t12_125{left:80px;bottom:397px;}
#t13_125{left:88px;bottom:397px;letter-spacing:0.23px;}
#t14_125{left:140px;bottom:397px;}
#t15_125{left:147px;bottom:397px;letter-spacing:0.23px;word-spacing:4.32px;}
#t16_125{left:251px;bottom:397px;}
#t17_125{left:95px;bottom:378px;}
#t18_125{left:102px;bottom:378px;letter-spacing:0.23px;}
#t19_125{left:154px;bottom:378px;}
#t1a_125{left:162px;bottom:378px;}
#t1b_125{left:169px;bottom:378px;letter-spacing:7.77px;}
#t1c_125{left:192px;bottom:378px;letter-spacing:0.23px;word-spacing:4.32px;}
#t1d_125{left:266px;bottom:378px;}
#t1e_125{left:273px;bottom:378px;letter-spacing:7.76px;}
#t1f_125{left:295px;bottom:378px;letter-spacing:0.23px;}
#t1g_125{left:80px;bottom:347px;letter-spacing:-0.27px;}
#t1h_125{left:184px;bottom:345px;letter-spacing:-0.15px;word-spacing:1.94px;}
#t1i_125{left:80px;bottom:325px;}
#t1j_125{left:94px;bottom:324px;letter-spacing:-0.15px;word-spacing:1.11px;}
#t1k_125{left:471px;bottom:325px;letter-spacing:-0.27px;}
#t1l_125{left:520px;bottom:324px;letter-spacing:-0.12px;word-spacing:1.1px;}
#t1m_125{left:80px;bottom:302px;letter-spacing:-0.14px;word-spacing:0.1px;}
#t1n_125{left:264px;bottom:303px;}
#t1o_125{left:272px;bottom:302px;letter-spacing:-0.16px;word-spacing:0.17px;}
#t1p_125{left:448px;bottom:303px;}
#t1q_125{left:460px;bottom:302px;letter-spacing:-0.17px;}
#t1r_125{left:489px;bottom:303px;letter-spacing:-0.27px;word-spacing:4.99px;}
#t1s_125{left:530px;bottom:302px;letter-spacing:-0.12px;word-spacing:0.12px;}
#t1t_125{left:80px;bottom:280px;letter-spacing:-0.17px;word-spacing:1px;}
#t1u_125{left:210px;bottom:282px;letter-spacing:-0.27px;}
#t1v_125{left:313px;bottom:280px;letter-spacing:-0.13px;word-spacing:0.97px;}
#t1w_125{left:359px;bottom:282px;letter-spacing:-0.27px;}
#t1x_125{left:413px;bottom:280px;letter-spacing:-0.16px;word-spacing:0.98px;}
#t1y_125{left:80px;bottom:258px;letter-spacing:-0.15px;word-spacing:1.09px;}
#t1z_125{left:362px;bottom:258px;}
#t20_125{left:377px;bottom:258px;letter-spacing:-0.17px;word-spacing:1.17px;}
#t21_125{left:496px;bottom:258px;}
#t22_125{left:511px;bottom:258px;letter-spacing:-0.17px;}
#t23_125{left:541px;bottom:258px;}
#t24_125{left:551px;bottom:266px;}
#t25_125{left:557px;bottom:258px;}
#t26_125{left:80px;bottom:237px;letter-spacing:-0.15px;word-spacing:0.91px;}
#t27_125{left:80px;bottom:215px;letter-spacing:-0.13px;}
#t28_125{left:149px;bottom:223px;letter-spacing:0.08px;}
#t29_125{left:94px;bottom:184px;letter-spacing:0.05px;}
#t2a_125{left:105px;bottom:178px;letter-spacing:-0.12px;word-spacing:-0.46px;}
#t2b_125{left:515px;bottom:178px;letter-spacing:-0.17px;}
#t2c_125{left:80px;bottom:160px;letter-spacing:-0.12px;}
#t2d_125{left:99px;bottom:160px;letter-spacing:-0.12px;word-spacing:-0.63px;}
#t2e_125{left:80px;bottom:143px;letter-spacing:-0.13px;word-spacing:0.27px;}
#t2f_125{left:80px;bottom:125px;letter-spacing:-0.13px;word-spacing:0.01px;}
#t2g_125{left:313px;bottom:72px;letter-spacing:-0.16px;}

.s1_125{font-size:18px;font-family:LinBiolinumOB_gnt;color:#9090C0;}
.s2_125{font-size:18px;font-family:LinBiolinumOB_gnt;color:#262626;}
.s3_125{font-size:17px;font-family:LinLibertineO_gnp;color:#000;}
.s4_125{font-size:17px;font-family:LinLibertineO_gnp;color:#80171F;}
.s5_125{font-size:17px;font-family:txsy_gmf;color:#000;}
.s6_125{font-size:17px;font-family:LinLibertineI_gmc;color:#000;}
.s7_125{font-size:17px;font-family:LinLibertineI_gm8;color:#000;}
.s8_125{font-size:17px;font-family:rtxmi_gma;color:#000;}
.s9_125{font-size:17px;font-family:LinLibertine_gmu;color:#000;}
.sa_125{font-size:12px;font-family:InconsolataLGC_go0;color:#686868;}
.sb_125{font-size:12px;font-family:InconsolataLGC-Bold_goe;color:#4172A3;}
.sc_125{font-size:12px;font-family:InconsolataLGC_go0;color:#262626;}
.sd_125{font-size:14px;font-family:InconsolataLGC_go0;color:#000;}
.se_125{font-size:12px;font-family:LinLibertineO_gnp;color:#000;}
.sf_125{font-size:12px;font-family:LinLibertineO_gnp;color:#80171F;}
.sg_125{font-size:11px;font-family:LinLibertineO_gnp;color:#000;}
.sh_125{font-size:14px;font-family:LinLibertineO_gnp;color:#000;}
.si_125{font-size:14px;font-family:LinLibertineO_gnp;color:#80171F;}
</style>
<!-- End inline CSS -->

<!-- Begin embedded font definitions -->
<style id="fonts125" type="text/css" >

@font-face {
	font-family: InconsolataLGC-Bold_goe;
	src: url("fonts/InconsolataLGC-Bold_goe.woff") format("woff");
}

@font-face {
	font-family: InconsolataLGC_go0;
	src: url("fonts/InconsolataLGC_go0.woff") format("woff");
}

@font-face {
	font-family: LinBiolinumOB_gnt;
	src: url("fonts/LinBiolinumOB_gnt.woff") format("woff");
}

@font-face {
	font-family: LinLibertineI_gm8;
	src: url("fonts/LinLibertineI_gm8.woff") format("woff");
}

@font-face {
	font-family: LinLibertineI_gmc;
	src: url("fonts/LinLibertineI_gmc.woff") format("woff");
}

@font-face {
	font-family: LinLibertineO_gnp;
	src: url("fonts/LinLibertineO_gnp.woff") format("woff");
}

@font-face {
	font-family: LinLibertine_gmu;
	src: url("fonts/LinLibertine_gmu.woff") format("woff");
}

@font-face {
	font-family: rtxmi_gma;
	src: url("fonts/rtxmi_gma.woff") format("woff");
}

@font-face {
	font-family: txsy_gmf;
	src: url("fonts/txsy_gmf.woff") format("woff");
}

</style>
<!-- End embedded font definitions -->

<!-- Begin page background -->
<div id="pg125Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none;"></div>
<div id="pg125" style="-webkit-user-select: none;"><svg id="pdf125" width="640" height="853" viewBox="0 0 640 853" style="width:640px; height:853px; -moz-transform:scale(1); z-index: 0; isolation: isolate;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<defs>
<style type="text/css"><![CDATA[
.g0_125{
fill: none;
stroke: #000;
stroke-width: 0.933;
stroke-miterlimit: 10;
}
.g1_125{
fill: none;
stroke: #000;
stroke-width: 0.608;
stroke-miterlimit: 10;
}
]]></style>
</defs>
<path d="M208,279.1h9.2" class="g0_125"/>
<path d="M80.1,652.9H272.4" class="g1_125"/>
</svg></div>
<!-- End page background -->


<!-- Begin text definitions (Positioned/styled in CSS) -->
<div class="text-container"><span id="t1_125" class="t s1_125">1.3.4 </span><span id="t2_125" class="t s2_125">Procedures as Returned Values </span>
<span id="t3_125" class="t s3_125">e above examples demonstrate how the ability to pass procedures as </span>
<span id="t4_125" class="t s3_125" data-mappings='[[15,"fi"]]'>arguments signiﬁcantly enhances the expressive power of our program- </span>
<span id="t5_125" class="t s3_125">ming language. We can achieve even more expressive power by creating </span>
<span id="t6_125" class="t s3_125">procedures whose returned values are themselves procedures. </span>
<span id="t7_125" class="t s3_125" data-mappings='[[52,"fi"]]'>We can illustrate this idea by looking again at the ﬁxed-point exam- </span>
<span id="t8_125" class="t s3_125">ple described at the end of </span><span id="t9_125" class="t s4_125">Section 1.3.3</span><span id="ta_125" class="t s3_125">. We formulated a new version </span>
<span id="tb_125" class="t s3_125" data-mappings='[[34,"fi"]]'>of the square-root procedure as a ﬁxed-point search, starting with the </span>
<span id="tc_125" class="t s3_125">observation that </span>
<span id="td_125" class="t s5_125">√ </span>
<span id="te_125" class="t s6_125">x </span><span id="tf_125" class="t s3_125" data-mappings='[[5,"fi"]]'>is a ﬁxed-point of the function </span><span id="tg_125" class="t s7_125">y </span><span id="th_125" class="t s5_125">7</span><span id="ti_125" class="t s5_125">→ </span><span id="tj_125" class="t s6_125">x </span><span id="tk_125" class="t s8_125">/ </span><span id="tl_125" class="t s7_125">y</span><span id="tm_125" class="t s3_125">. en we </span>
<span id="tn_125" class="t s3_125">used average damping to make the approximations converge. Average </span>
<span id="to_125" class="t s3_125">damping is a useful general technique in itself. Namely, given a function </span>
<span id="tp_125" class="t s6_125">f </span><span id="tq_125" class="t s3_125">, we consider the function whose value at </span><span id="tr_125" class="t s6_125">x </span><span id="ts_125" class="t s3_125">is equal to the average of </span>
<span id="tt_125" class="t s6_125">x </span><span id="tu_125" class="t s3_125">and </span><span id="tv_125" class="t s6_125">f </span><span id="tw_125" class="t s9_125">(</span><span id="tx_125" class="t s6_125">x </span><span id="ty_125" class="t s9_125">)</span><span id="tz_125" class="t s3_125">. </span>
<span id="t10_125" class="t s3_125">We can express the idea of average damping by means of the fol- </span>
<span id="t11_125" class="t s3_125">lowing procedure: </span>
<span id="t12_125" class="t sa_125">(</span><span id="t13_125" class="t sb_125">define </span><span id="t14_125" class="t sa_125">(</span><span id="t15_125" class="t sc_125">average-damp f</span><span id="t16_125" class="t sa_125">) </span>
<span id="t17_125" class="t sa_125">(</span><span id="t18_125" class="t sb_125">lambda </span><span id="t19_125" class="t sa_125">(</span><span id="t1a_125" class="t sc_125">x</span><span id="t1b_125" class="t sa_125">)(</span><span id="t1c_125" class="t sc_125">average x </span><span id="t1d_125" class="t sa_125">(</span><span id="t1e_125" class="t sc_125">fx</span><span id="t1f_125" class="t sa_125">)))) </span>
<span id="t1g_125" class="t sd_125">average-damp </span><span id="t1h_125" class="t s3_125">is a procedure that takes as its argument a procedure </span>
<span id="t1i_125" class="t sd_125">f </span><span id="t1j_125" class="t s3_125">and returns as its value a procedure (produced by the </span><span id="t1k_125" class="t sd_125">lambda</span><span id="t1l_125" class="t s3_125">) that, </span>
<span id="t1m_125" class="t s3_125">when applied to a number </span><span id="t1n_125" class="t sd_125">x</span><span id="t1o_125" class="t s3_125">, produces the average of </span><span id="t1p_125" class="t sd_125">x </span><span id="t1q_125" class="t s3_125">and </span><span id="t1r_125" class="t sd_125">(f x)</span><span id="t1s_125" class="t s3_125">. For </span>
<span id="t1t_125" class="t s3_125">example, applying </span><span id="t1u_125" class="t sd_125">average-damp </span><span id="t1v_125" class="t s3_125">to the </span><span id="t1w_125" class="t sd_125">square </span><span id="t1x_125" class="t s3_125">procedure produces a </span>
<span id="t1y_125" class="t s3_125">procedure whose value at some number </span><span id="t1z_125" class="t s6_125">x </span><span id="t20_125" class="t s3_125">is the average of </span><span id="t21_125" class="t s6_125">x </span><span id="t22_125" class="t s3_125">and </span><span id="t23_125" class="t s6_125">x </span>
<span id="t24_125" class="t se_125">2 </span>
<span id="t25_125" class="t s3_125">. </span>
<span id="t26_125" class="t s3_125">Applying this resulting procedure to 10 returns the average of 10 and </span>
<span id="t27_125" class="t s3_125">100, or 55: </span>
<span id="t28_125" class="t sf_125">59 </span>
<span id="t29_125" class="t sg_125">59 </span>
<span id="t2a_125" class="t sh_125">Observe that this is a combination whose operator is itself a combination. </span><span id="t2b_125" class="t si_125">Exercise </span>
<span id="t2c_125" class="t si_125">1.4 </span><span id="t2d_125" class="t sh_125">already demonstrated the ability to form such combinations, but that was only a toy </span>
<span id="t2e_125" class="t sh_125">example. Here we begin to see the real need for such combinations—when applying a </span>
<span id="t2f_125" class="t sh_125">procedure that is obtained as the value returned by a higher-order procedure. </span>
<span id="t2g_125" class="t s3_125">97 </span></div>
<!-- End text definitions -->


</div>
</body>
</html>
